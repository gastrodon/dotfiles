#! /bin/sh

if [ $# -eq 0 ]; then
    max_brightness="$(cat /sys/class/backlight/intel_backlight/max_brightness)"
    current="$(cat /sys/class/backlight/intel_backlight/brightness)"
    percentage="$((current * 100 / max_brightness))"
    echo $percentage
    exit 0
fi

value=$1

if ! [[ "$value" =~ ^[0-9]+$ ]] || [ "$value" -lt 1 ] || [ "$value" -gt 100 ]; then
    echo "Error: Value must be an integer between 1 and 100"
    exit 1
fi

max_brightness="$(cat /sys/class/backlight/intel_backlight/max_brightness)"
scaled_brightness="$((value * max_brightness / 100))"
printf '%d\n' "$scaled_brightness" | sudo tee /sys/class/backlight/intel_backlight/brightness > /dev/null

